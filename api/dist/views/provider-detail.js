import { jsxs as _jsxs, jsx as _jsx } from "hono/jsx/jsx-runtime";
import { StatusIcon } from './components';
import { Layout } from './layout';
const DAY_LABELS = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];
export const ProviderDetailPage = ({ member, weeklyHours, dateOverrides, skills, allSkills, territories }) => {
    const hourMap = new Map();
    for (const row of weeklyHours)
        hourMap.set(row.day_of_week, { start_time: row.start_time, end_time: row.end_time });
    const assignedTerritories = territories.filter((t) => t.assigned);
    return (_jsxs(Layout, { title: `${member.first_name} ${member.last_name}`, children: [_jsxs("div", { class: "page-header", children: [_jsx("div", { class: "page-header-info", children: _jsxs("div", { class: "flex items-center gap-2", children: [_jsxs("h2", { children: [member.first_name, " ", member.last_name] }), _jsx(StatusIcon, { status: member.is_active ? 'active' : 'inactive' })] }) }), _jsx("div", { class: "page-header-actions", children: _jsx("a", { href: "/admin/team", class: "uk-btn uk-btn-default uk-btn-sm", "hx-get": "/admin/team", "hx-target": "#page-content", "hx-select": "#page-content", "hx-push-url": "true", children: "Back" }) })] }), _jsx("div", { class: "p-8", children: _jsxs("div", { class: "grid gap-6", style: "max-width: 800px;", children: [_jsx("div", { class: "uk-card uk-card-body", children: _jsx("section", { children: _jsxs("form", { class: "autosave", "hx-post": `/admin/team/${member.id}`, "hx-target": "#page-content", "hx-select": "#page-content", "hx-swap": "none", "hx-trigger": "input delay:500ms, change", "hx-sync": "this:queue last", children: [_jsx("input", { type: "hidden", name: "_section", value: "profile" }), _jsxs("div", { class: "flex items-center justify-between mb-4", children: [_jsx("h3", { class: "text-base font-semibold", children: "Profile" }), _jsx("span", { class: "save-indicator" })] }), _jsxs("div", { class: "grid gap-4 sm:grid-cols-2", children: [_jsxs("div", { class: "grid gap-2", children: [_jsx("label", { class: "uk-form-label", for: "first_name", children: "First Name" }), _jsx("input", { id: "first_name", name: "first_name", class: "uk-input", value: member.first_name })] }), _jsxs("div", { class: "grid gap-2", children: [_jsx("label", { class: "uk-form-label", for: "last_name", children: "Last Name" }), _jsx("input", { id: "last_name", name: "last_name", class: "uk-input", value: member.last_name })] }), _jsxs("div", { class: "grid gap-2 sm:col-span-2", children: [_jsx("label", { class: "uk-form-label", for: "email", children: "Email" }), _jsx("input", { id: "email", name: "email", type: "email", class: "uk-input", value: member.email })] }), _jsxs("div", { class: "grid gap-2 sm:col-span-2", children: [_jsx("label", { class: "uk-form-label", for: "phone", children: "Phone" }), _jsx("input", { id: "phone", name: "phone", type: "tel", class: "uk-input", value: member.phone || '' })] }), _jsxs("div", { class: "grid gap-2 sm:col-span-2", children: [_jsx("label", { class: "uk-form-label", for: "role", children: "Role" }), _jsxs("select", { id: "role", name: "role", class: "uk-select", children: [_jsx("option", { value: "manager", selected: member.role === 'manager', children: "Manager" }), _jsx("option", { value: "provider", selected: member.role === 'provider', children: "Provider" })] })] }), _jsxs("label", { class: "uk-form-label flex items-center gap-2 cursor-pointer sm:col-span-2", children: [_jsx("input", { type: "checkbox", name: "can_be_auto_assigned", checked: Boolean(member.can_be_auto_assigned), class: "uk-toggle-switch uk-toggle-switch-primary" }), "Can be auto-assigned"] }), _jsxs("label", { class: "uk-form-label flex items-center gap-2 cursor-pointer sm:col-span-2", children: [_jsx("input", { type: "checkbox", name: "is_active", checked: Boolean(member.is_active), class: "uk-toggle-switch uk-toggle-switch-primary" }), "Active"] })] })] }) }) }), _jsx("div", { class: "uk-card uk-card-body", children: _jsxs("section", { children: [_jsx("h3", { class: "text-base font-semibold mb-4", children: "Weekly Hours" }), _jsxs("form", { "hx-post": `/admin/team/${member.id}/hours`, "hx-target": "#page-content", "hx-select": "#page-content", children: [_jsx("div", { class: "grid gap-3", children: DAY_LABELS.map((label, day) => {
                                                    const row = hourMap.get(day);
                                                    const enabled = Boolean(row);
                                                    return (_jsxs("div", { class: "grid grid-cols-[60px_1fr_1fr_auto] items-center gap-3", children: [_jsx("span", { class: "text-sm text-muted-foreground", children: label }), _jsx("input", { type: "time", name: `day_${day}_start`, class: "uk-input", value: row?.start_time || '09:00' }), _jsx("input", { type: "time", name: `day_${day}_end`, class: "uk-input", value: row?.end_time || '17:00' }), _jsxs("label", { class: "flex items-center gap-2 text-sm", children: [_jsx("input", { type: "checkbox", name: `day_${day}_enabled`, class: "uk-checkbox", checked: enabled }), "Enabled"] })] }, label));
                                                }) }), _jsx("div", { class: "mt-4", children: _jsx("button", { type: "submit", class: "uk-btn uk-btn-primary", children: "Save Hours" }) })] })] }) }), _jsx("div", { class: "uk-card uk-card-body", children: _jsxs("section", { children: [_jsx("h3", { class: "text-base font-semibold mb-4", children: "Date Overrides" }), _jsx("div", { class: "uk-overflow-auto mb-4", children: _jsxs("table", { class: "uk-table uk-table-divider uk-table-hover uk-table-sm text-sm", children: [_jsx("thead", { children: _jsxs("tr", { children: [_jsx("th", { class: "text-left", children: "Date" }), _jsx("th", { class: "text-left", children: "Available" }), _jsx("th", { class: "text-left", children: "Hours" }), _jsx("th", { class: "text-left", children: "Action" })] }) }), _jsxs("tbody", { children: [dateOverrides.map((o) => (_jsxs("tr", { children: [_jsx("td", { children: o.date }), _jsx("td", { children: o.is_available ? 'Yes' : 'No' }), _jsx("td", { children: o.start_time && o.end_time ? `${o.start_time} - ${o.end_time}` : '-' }), _jsx("td", { children: _jsx("button", { type: "button", class: "delete-btn", "hx-delete": `/admin/team/${member.id}/overrides/${o.id}`, "data-confirm": "arm", "hx-target": "#page-content", "hx-select": "#page-content", children: "Delete" }) })] }, o.id))), dateOverrides.length === 0 && (_jsx("tr", { children: _jsx("td", { colspan: 4, class: "text-muted-foreground", children: "No overrides." }) }))] })] }) }), _jsxs("form", { "hx-post": `/admin/team/${member.id}/overrides`, "hx-target": "#page-content", "hx-select": "#page-content", children: [_jsxs("div", { class: "grid gap-3 sm:grid-cols-2", children: [_jsxs("div", { class: "grid gap-2", children: [_jsx("label", { class: "uk-form-label", for: "override-date", children: "Date" }), _jsx("input", { id: "override-date", name: "date", type: "date", class: "uk-input", required: true })] }), _jsxs("div", { class: "grid gap-2", children: [_jsx("label", { class: "uk-form-label", for: "override-available", children: "Availability" }), _jsxs("select", { id: "override-available", name: "is_available", class: "uk-select", children: [_jsx("option", { value: "1", children: "Available" }), _jsx("option", { value: "0", children: "Unavailable" })] })] }), _jsxs("div", { class: "grid gap-2", children: [_jsx("label", { class: "uk-form-label", for: "override-start", children: "Start" }), _jsx("input", { id: "override-start", name: "start_time", type: "time", class: "uk-input" })] }), _jsxs("div", { class: "grid gap-2", children: [_jsx("label", { class: "uk-form-label", for: "override-end", children: "End" }), _jsx("input", { id: "override-end", name: "end_time", type: "time", class: "uk-input" })] })] }), _jsx("div", { class: "mt-4", children: _jsx("button", { type: "submit", class: "uk-btn uk-btn-default", children: "Add Override" }) })] })] }) }), _jsx("div", { class: "uk-card uk-card-body", children: _jsxs("section", { children: [_jsx("h3", { class: "text-base font-semibold mb-4", children: "Skills" }), _jsxs("div", { class: "flex flex-wrap items-center gap-2 mb-4", children: [skills.map((skill) => (_jsxs("form", { "hx-post": `/admin/team/${member.id}/skills`, "hx-target": "#page-content", "hx-select": "#page-content", class: "flex items-center gap-1", children: [_jsx("input", { type: "hidden", name: "remove_skill_id", value: skill.id }), _jsx("span", { class: "uk-label", children: skill.name }), _jsx("button", { type: "submit", class: "uk-btn uk-btn-default uk-btn-sm", children: "x" })] }, skill.id))), skills.length === 0 && _jsx("span", { class: "text-sm text-muted-foreground", children: "No skills assigned." })] }), _jsxs("form", { "hx-post": `/admin/team/${member.id}/skills`, "hx-target": "#page-content", "hx-select": "#page-content", class: "flex items-end gap-3", children: [skills.map((skill) => (_jsx("input", { type: "hidden", name: "skill_ids", value: skill.id }, skill.id))), _jsxs("div", { class: "grid gap-2 flex-1", children: [_jsx("label", { class: "uk-form-label", for: "add-skill", children: "Add Skill" }), _jsxs("select", { id: "add-skill", name: "skill_ids", class: "uk-select", children: [_jsx("option", { value: "", children: "Select skill..." }), allSkills.map((skill) => (_jsx("option", { value: skill.id, children: skill.name }, skill.id)))] })] }), _jsx("button", { type: "submit", class: "uk-btn uk-btn-default", children: "Add" })] })] }) }), _jsx("div", { class: "uk-card uk-card-body", children: _jsxs("section", { id: "provider-territories", children: [_jsxs("div", { class: "flex items-center justify-between mb-4", children: [_jsx("h3", { class: "text-base font-semibold", children: "Territories" }), _jsxs("span", { class: "text-sm text-muted-foreground", id: "provider-territories-count", children: [assignedTerritories.length, " assigned"] }), _jsx("span", { class: "save-indicator" })] }), _jsx("div", { class: "grid gap-2", children: territories.map((t) => (_jsxs("form", { children: [assignedTerritories.filter((a) => !t.assigned || a.id !== t.id).map((a) => (_jsx("input", { type: "hidden", name: "territory_ids", value: a.id }, a.id))), _jsxs("label", { class: "flex items-center justify-between gap-3", children: [_jsx("span", { class: "text-sm", children: t.name }), _jsx("input", { type: "checkbox", class: "uk-checkbox", name: "territory_ids", value: t.id, checked: t.assigned, "hx-post": `/admin/team/${member.id}/territories`, "hx-target": "#page-content", "hx-select": "#page-content", "hx-vals": `js:this.checked ? {} : { remove_territory_id: '${t.id}' }` })] })] }, t.id))) })] }) }), _jsx("div", { class: "uk-card uk-card-body danger-card", children: _jsxs("section", { children: [_jsx("h3", { class: "text-base font-semibold mb-3", children: "Delete" }), _jsx("button", { type: "button", class: "delete-btn", "hx-post": `/admin/team/${member.id}/delete`, "data-confirm": "arm", "hx-target": "#page-content", children: "Delete Team Member" })] }) })] }) })] }));
};
//# sourceMappingURL=provider-detail.js.map