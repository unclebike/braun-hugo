import { jsx as _jsx, jsxs as _jsxs } from "hono/jsx/jsx-runtime";
import { StatusBadge, StatusIcon } from './components';
import { Layout } from './layout';
const STATUS_OPTIONS = ['created', 'assigned', 'enroute', 'in_progress', 'complete', 'cancelled'];
const TaskSourceContext = ({ source }) => {
    if (!source || source.type !== 'sms' || !source.excerpt)
        return null;
    return (_jsxs("details", { class: "mt-1.5", children: [_jsxs("summary", { class: "text-xs text-muted-foreground cursor-pointer", style: "display:inline-flex;align-items:center;gap:6px;", children: [_jsx("span", { "aria-hidden": "true", children: "\uD83D\uDCAC" }), "Message context"] }), _jsxs("div", { class: "mt-1 rounded-md border border-border p-2", style: "background:var(--surface-elevated);", children: [_jsx("p", { class: "text-xs", style: "margin:0;white-space:pre-wrap;word-break:break-word;", children: source.excerpt }), source.message_id && (_jsx("a", { href: `/admin/inbox/${source.message_id}`, class: "uk-link text-xs", "hx-get": `/admin/inbox/${source.message_id}`, "hx-target": "#page-content", "hx-select": "#page-content", "hx-push-url": "true", style: "display:inline-block;margin-top:6px;", children: "Open thread" }))] })] }));
};
export const NotesList = ({ jobId, notes, listId = 'notes-list', }) => (_jsx("div", { id: listId, "data-notes-list": "1", children: notes.length === 0 ? (_jsx("p", { class: "text-sm text-muted-foreground", children: "No tasks yet." })) : (notes.map((note, idx) => (_jsxs("div", { class: `flex items-start gap-3 p-3 border border-border rounded-md ${note.completed ? 'opacity-60' : ''}`, children: [_jsx("input", { type: "checkbox", class: "uk-checkbox mt-1", checked: note.completed ? true : undefined, "hx-post": `/admin/jobs/${jobId}/notes/toggle`, "hx-vals": JSON.stringify({ noteIndex: idx }), "hx-target": "closest [data-notes-list]", "hx-select": "#notes-list > *", "hx-swap": "innerHTML" }), _jsxs("div", { class: "flex-1 min-w-0", children: [_jsx("p", { class: `text-sm ${note.completed ? 'line-through text-muted-foreground' : ''}`, children: note.text }), _jsx("p", { class: "text-xs text-muted-foreground mt-1", children: new Date(note.timestamp).toLocaleString() }), _jsx(TaskSourceContext, { source: note.source })] }), _jsx("button", { type: "button", class: "delete-btn uk-btn uk-btn-small", "hx-post": `/admin/jobs/${jobId}/notes/delete`, "hx-vals": JSON.stringify({ noteIndex: idx }), "hx-target": "closest [data-notes-list]", "hx-select": "#notes-list > *", "hx-swap": "innerHTML", "data-confirm": "arm", children: "\u2715" })] }, idx)))) }));
export const SmsThreadCard = ({ jobId, smsThreadMessage, customerName }) => {
    const hasUnread = !!smsThreadMessage && smsThreadMessage.is_read === 0;
    const updatedLabel = smsThreadMessage
        ? new Date(`${smsThreadMessage.updated_at}Z`).toLocaleString('en-CA', { month: 'short', day: 'numeric', hour: '2-digit', minute: '2-digit' })
        : null;
    return (_jsxs("div", { id: "job-sms-thread-card", class: "uk-card uk-card-body", "hx-get": `/admin/jobs/${jobId}/sms-thread-card`, "hx-trigger": "every 8s", "hx-swap": "outerHTML", children: [_jsxs("div", { class: "flex items-center justify-between mb-3", children: [_jsx("h3", { class: "text-base font-semibold", children: "SMS Thread" }), hasUnread ? (_jsxs("span", { class: "uk-label uk-label-destructive", style: "display:inline-flex;align-items:center;gap:6px;", children: [_jsx("span", { style: "width:6px;height:6px;border-radius:999px;background:currentColor;display:inline-block;" }), "New message"] })) : (_jsx("span", { class: "text-xs text-muted-foreground", children: "Up to date" }))] }), smsThreadMessage ? (_jsxs("div", { class: "grid gap-3", children: [_jsx("p", { class: "text-sm text-muted-foreground", style: "margin:0;", children: smsThreadMessage.body ? `Latest: ${smsThreadMessage.body}` : 'SMS conversation is linked to this job.' }), _jsxs("div", { class: "flex items-center justify-between", children: [_jsx("span", { class: "text-xs text-muted-foreground", children: updatedLabel ? `Updated ${updatedLabel}` : '' }), _jsx("button", { type: "button", class: "uk-btn uk-btn-default uk-btn-sm", "data-sms-thread-modal-open": "true", "data-sms-thread-modal-title": customerName || '', "hx-get": `/admin/inbox/${smsThreadMessage.id}/sms-thread-panel`, "hx-target": "#sms-thread-modal-body", "hx-swap": "innerHTML", "hx-indicator": "#sms-thread-modal-loading", "aria-label": "View SMS conversation", children: "View SMS" })] })] })) : (_jsx("p", { class: "text-sm text-muted-foreground", children: "No SMS conversation linked yet." }))] }));
};
const money = (cents) => `$${(cents / 100).toFixed(2)}`;
export const JobDetailPage = ({ job, customer, service, territory, team, assignedProviderId, notes, smsThreadMessage, lineItems }) => {
    const subtotal = lineItems.reduce((sum, line) => sum + line.total_cents, 0);
    const customerName = customer ? `${customer.first_name} ${customer.last_name}`.trim() : 'Unassigned customer';
    const serviceName = service?.name || job.custom_service_name || 'Custom Service';
    const providerName = assignedProviderId
        ? (() => {
            const p = team.find(t => t.id === assignedProviderId);
            return p ? `${p.first_name} ${p.last_name}`.trim() : 'Assigned';
        })()
        : 'Unassigned';
    const dateLabel = (() => {
        try {
            const d = new Date(`${job.scheduled_date}T00:00:00`);
            return d.toLocaleDateString('en-CA', { weekday: 'short', month: 'short', day: 'numeric' });
        }
        catch {
            return job.scheduled_date;
        }
    })();
    const timeLabel = job.scheduled_start_time ? job.scheduled_start_time : '';
    const scheduleLabel = `${dateLabel}${timeLabel ? ` at ${timeLabel}` : ''}`;
    const canOpenSms = Boolean(smsThreadMessage);
    const smsTitle = customer ? `${customer.first_name} ${customer.last_name}`.trim() : '';
    return (_jsxs(Layout, { title: `Job ${job.id}`, children: [_jsxs("div", { class: "page-header page-header--rich", children: [_jsxs("div", { class: "page-header-info", children: [_jsxs("div", { class: "flex items-center gap-2", children: [_jsx("h2", { children: customerName }), _jsx(StatusIcon, { status: job.status })] }), _jsxs("div", { class: "page-header-meta", children: [_jsx("span", { children: serviceName }), _jsx("span", { children: scheduleLabel }), _jsx("span", { children: providerName })] })] }), _jsxs("div", { class: "page-header-actions", children: [_jsx("button", { type: "button", class: "uk-btn uk-btn-primary uk-btn-sm", "data-sms-thread-modal-open": canOpenSms ? 'true' : undefined, "data-sms-thread-modal-title": canOpenSms ? smsTitle : undefined, "hx-get": canOpenSms ? `/admin/inbox/${smsThreadMessage?.id}/sms-thread-panel` : undefined, "hx-target": canOpenSms ? '#sms-thread-modal-body' : undefined, "hx-swap": canOpenSms ? 'innerHTML' : undefined, "hx-indicator": canOpenSms ? '#sms-thread-modal-loading' : undefined, "aria-disabled": canOpenSms ? 'false' : 'true', disabled: canOpenSms ? undefined : true, children: "Message" }), _jsxs("form", { "hx-post": `/admin/jobs/${job.id}/status`, "hx-target": "#page-content", "hx-select": "#page-content", class: "flex items-center gap-2", children: [_jsx("select", { name: "status", class: "uk-select uk-form-small", "aria-label": "Job status", style: "max-width: 160px;", children: STATUS_OPTIONS.map((status) => (_jsx("option", { value: status, selected: job.status === status, children: status.replace('_', ' ') }, status))) }), _jsx("button", { type: "submit", class: "uk-btn uk-btn-default uk-btn-sm", children: "Update" })] }), _jsx("a", { href: "/admin/jobs", class: "uk-btn uk-btn-default uk-btn-sm", "hx-get": "/admin/jobs", "hx-target": "#page-content", "hx-select": "#page-content", "hx-push-url": "true", children: "Back" })] })] }), _jsx("div", { class: "p-4 sm:p-8", style: "padding-bottom: calc(24px + var(--safe-bottom));", children: _jsx("div", { class: "mx-auto", style: "max-width: 1120px;", children: _jsxs("div", { class: "grid gap-4 lg:grid-cols-[1fr,320px] lg:gap-6", children: [_jsxs("div", { class: "grid gap-4 sm:gap-6", children: [_jsx("div", { class: "uk-card uk-card-body", style: "background:var(--surface-0);", children: _jsxs("div", { class: "flex items-start justify-between gap-3", children: [_jsxs("div", { class: "min-w-0", children: [_jsx("p", { class: "text-[10px] uppercase tracking-wide text-muted-foreground", children: "Job" }), _jsx("p", { class: "text-base font-semibold", style: "margin:0;", children: job.id.slice(0, 8) }), _jsxs("p", { class: "text-xs text-muted-foreground", style: "margin:4px 0 0;", children: ["Created ", new Date(`${job.created_at}Z`).toLocaleString()] })] }), _jsxs("div", { class: "text-right", children: [_jsx("p", { class: "text-[10px] uppercase tracking-wide text-muted-foreground", children: "Total" }), _jsx("p", { class: "text-2xl font-extrabold", style: "margin:0;", children: money(job.total_price_cents) }), _jsxs("p", { class: "text-xs text-muted-foreground", style: "margin:4px 0 0;", children: [lineItems.length, " item", lineItems.length === 1 ? '' : 's'] })] })] }) }), _jsx("div", { class: "uk-card uk-card-body", id: "job-edit-details", style: "scroll-margin-top: 96px;", children: _jsx("section", { children: _jsxs("form", { class: "autosave", "hx-post": `/admin/jobs/${job.id}`, "hx-target": "#page-content", "hx-select": "#page-content", "hx-swap": "none", "hx-trigger": "input delay:500ms, change", "hx-sync": "this:queue last", children: [_jsx("input", { type: "hidden", name: "_section", value: "details" }), _jsxs("div", { class: "flex items-center justify-between mb-4", children: [_jsxs("div", { class: "min-w-0", children: [_jsx("h3", { class: "text-base font-semibold", style: "margin:0;", children: "Job details" }), _jsx("p", { class: "text-xs text-muted-foreground", style: "margin:2px 0 0;", children: "Edits auto-save." })] }), _jsx("span", { class: "save-indicator" })] }), _jsxs("div", { class: "grid gap-4 sm:grid-cols-2", children: [_jsxs("div", { class: "grid gap-2", children: [_jsx("label", { class: "uk-form-label", for: "scheduled-date", children: "Date" }), _jsx("input", { id: "scheduled-date", name: "scheduled_date", type: "date", class: "uk-input", value: job.scheduled_date })] }), _jsxs("div", { class: "grid gap-2", children: [_jsx("label", { class: "uk-form-label", for: "scheduled-time", children: "Start Time" }), _jsx("input", { id: "scheduled-time", name: "scheduled_start_time", type: "time", class: "uk-input", value: job.scheduled_start_time })] }), _jsxs("div", { class: "grid gap-2", children: [_jsx("label", { class: "uk-form-label", for: "duration", children: "Duration (minutes)" }), _jsx("input", { id: "duration", name: "duration_minutes", type: "number", min: 1, class: "uk-input", value: job.duration_minutes })] }), _jsxs("div", { class: "grid gap-2", children: [_jsx("label", { class: "uk-form-label", for: "provider-id", children: "Assigned Provider" }), _jsxs("select", { id: "provider-id", name: "provider_id", class: "uk-select", children: [_jsx("option", { value: "", children: "Unassigned" }), team.map((provider) => (_jsxs("option", { value: provider.id, selected: assignedProviderId === provider.id, children: [provider.first_name, " ", provider.last_name] }, provider.id)))] })] }), _jsxs("div", { class: "grid gap-2", children: [_jsx("label", { class: "uk-form-label", for: "base-price", children: "Base Price ($)" }), _jsx("input", { id: "base-price", name: "base_price", type: "number", min: 0, step: 0.01, class: "uk-input", value: (job.base_price_cents / 100).toFixed(2) })] }), _jsxs("div", { class: "grid gap-2", children: [_jsx("label", { class: "uk-form-label", for: "total-price", children: "Total Price ($)" }), _jsx("input", { id: "total-price", name: "total_price", type: "number", min: 0, step: 0.01, class: "uk-input", value: (job.total_price_cents / 100).toFixed(2) })] })] })] }) }) }), _jsx("div", { class: "uk-card uk-card-body", id: "job-status", style: "scroll-margin-top: 96px;", children: _jsxs("section", { children: [_jsxs("div", { class: "flex items-center justify-between mb-4", children: [_jsx("h3", { class: "text-base font-semibold", style: "margin:0;", children: "Status" }), _jsx(StatusBadge, { status: job.status })] }), _jsxs("form", { "hx-post": `/admin/jobs/${job.id}/status`, "hx-target": "#page-content", "hx-select": "#page-content", class: "grid gap-3 sm:flex sm:items-end", children: [_jsxs("div", { class: "grid gap-2 flex-1", children: [_jsx("label", { class: "uk-form-label", for: "job-status-select", children: "Job Status" }), _jsx("select", { id: "job-status-select", name: "status", class: "uk-select", children: STATUS_OPTIONS.map((status) => (_jsx("option", { value: status, selected: job.status === status, children: status.replace('_', ' ') }, status))) })] }), _jsx("button", { type: "submit", class: "uk-btn uk-btn-default", children: "Update" })] }), _jsxs("div", { class: "mt-4 rounded-md border border-border p-3", style: "background:var(--surface-elevated);", children: [_jsx("p", { class: "text-xs uppercase tracking-wide text-muted-foreground", children: "Pricing subtotal" }), _jsx("p", { class: "text-lg font-semibold", children: money(subtotal) }), _jsxs("p", { class: "text-xs text-muted-foreground", children: [lineItems.length, " line item", lineItems.length === 1 ? '' : 's', " in job breakdown"] })] })] }) }), _jsxs("div", { class: "uk-card uk-card-body hidden sm:block lg:hidden", children: [_jsx("h3", { class: "text-base font-semibold mb-4", children: "Customer" }), customer ? (_jsxs("div", { class: "grid gap-2 text-sm", children: [_jsxs("p", { class: "font-medium", children: [customer.first_name, " ", customer.last_name] }), _jsx("p", { class: "text-muted-foreground", children: customer.email || '-' }), _jsx("p", { class: "text-muted-foreground", children: customer.phone || '-' }), _jsx("div", { children: _jsx("a", { href: `/admin/customers/${customer.id}/edit`, class: "uk-link", "hx-get": `/admin/customers/${customer.id}/edit`, "hx-target": "#page-content", "hx-select": "#page-content", "hx-push-url": "true", children: "Open customer" }) })] })) : (_jsx("p", { class: "text-sm text-muted-foreground", children: "No customer linked." }))] }), _jsx("div", { id: "job-sms", children: _jsx(SmsThreadCard, { jobId: job.id, smsThreadMessage: smsThreadMessage, customerName: customer ? `${customer.first_name} ${customer.last_name}`.trim() : null }) }), _jsxs("div", { class: "uk-card uk-card-body hidden sm:block lg:hidden", children: [_jsx("h3", { class: "text-base font-semibold mb-4", children: "Service & Territory" }), _jsxs("div", { class: "grid gap-2 text-sm", children: [_jsxs("div", { children: [_jsx("span", { class: "text-muted-foreground", children: "Service:" }), ' ', _jsx("span", { class: "font-medium", children: service?.name || job.custom_service_name || 'Custom Service' })] }), _jsxs("div", { children: [_jsx("span", { class: "text-muted-foreground", children: "Territory:" }), ' ', _jsx("span", { class: "font-medium", children: territory?.name || '-' })] })] })] }), _jsxs("details", { class: "uk-card uk-card-body sm:hidden", children: [_jsx("summary", { class: "text-base font-semibold cursor-pointer", children: "Customer" }), _jsx("div", { class: "pt-4", children: customer ? (_jsxs("div", { class: "grid gap-2 text-sm", children: [_jsxs("p", { class: "font-medium", children: [customer.first_name, " ", customer.last_name] }), _jsx("p", { class: "text-muted-foreground", children: customer.email || '-' }), _jsx("p", { class: "text-muted-foreground", children: customer.phone || '-' }), _jsx("div", { children: _jsx("a", { href: `/admin/customers/${customer.id}/edit`, class: "uk-link", "hx-get": `/admin/customers/${customer.id}/edit`, "hx-target": "#page-content", "hx-select": "#page-content", "hx-push-url": "true", children: "Open customer" }) })] })) : (_jsx("p", { class: "text-sm text-muted-foreground", children: "No customer linked." })) })] }), _jsxs("details", { class: "uk-card uk-card-body sm:hidden", children: [_jsx("summary", { class: "text-base font-semibold cursor-pointer", children: "Service & Territory" }), _jsxs("div", { class: "grid gap-2 text-sm pt-4", children: [_jsxs("div", { children: [_jsx("span", { class: "text-muted-foreground", children: "Service:" }), ' ', _jsx("span", { class: "font-medium", children: service?.name || job.custom_service_name || 'Custom Service' })] }), _jsxs("div", { children: [_jsx("span", { class: "text-muted-foreground", children: "Territory:" }), ' ', _jsx("span", { class: "font-medium", children: territory?.name || '-' })] })] })] }), _jsx("div", { class: "uk-card uk-card-body", children: _jsxs("section", { children: [_jsxs("div", { class: "flex items-center justify-between mb-4", children: [_jsx("h3", { class: "text-base font-semibold", style: "margin:0;", children: "Price breakdown" }), _jsx("span", { class: "text-sm font-semibold", children: money(subtotal) })] }), _jsx("div", { class: "grid gap-2 mb-4", children: lineItems.length === 0 ? (_jsx("p", { class: "text-sm text-muted-foreground", children: "No line items yet." })) : (lineItems.map((line) => (_jsxs("div", { class: "flex items-start gap-3 p-3 border border-border rounded-md", children: [_jsxs("div", { class: "flex-1 min-w-0", style: line.parent_id ? 'padding-left: 16px;' : '', children: [_jsxs("div", { class: "flex items-center gap-2 flex-wrap", children: [_jsx("p", { class: "text-sm font-medium", children: line.description }), _jsx("span", { class: "text-xs text-muted-foreground", children: line.kind })] }), _jsxs("p", { class: "text-xs text-muted-foreground", children: [line.quantity, " x ", money(line.unit_price_cents)] })] }), _jsxs("div", { class: "text-right", children: [_jsx("p", { class: "text-sm font-semibold", children: money(line.total_cents) }), line.is_custom === 1 ? (_jsx("button", { type: "button", class: "delete-btn uk-btn uk-btn-small", "hx-post": `/admin/jobs/${job.id}/line-items/delete`, "hx-vals": JSON.stringify({ lineId: line.id }), "hx-target": "#page-content", "hx-select": "#page-content", "data-confirm": "arm", children: "Remove" })) : null] })] }, line.id)))) }), _jsxs("form", { "hx-post": `/admin/jobs/${job.id}/line-items/add`, "hx-target": "#page-content", "hx-select": "#page-content", "hx-swap": "innerHTML", class: "grid gap-2 sm:grid-cols-4", children: [_jsx("input", { type: "text", name: "description", class: "uk-input sm:col-span-2", placeholder: "Custom line description", required: true }), _jsx("input", { type: "number", name: "quantity", class: "uk-input", min: 1, step: 1, value: "1", required: true }), _jsx("input", { type: "number", name: "unit_price", class: "uk-input", min: 0, step: 0.01, placeholder: "Unit price", required: true }), _jsx("div", { class: "sm:col-span-4 flex justify-end", children: _jsx("button", { type: "submit", class: "uk-btn uk-btn-default", children: "Add Custom Line" }) })] })] }) }), _jsx("div", { class: "uk-card uk-card-body hidden sm:block", children: _jsxs("section", { children: [_jsx("h3", { class: "text-base font-semibold mb-4", children: "Task Notes" }), _jsx("div", { class: "grid gap-2 mb-4", children: _jsx(NotesList, { jobId: job.id, notes: notes, listId: "notes-list-desktop" }) }), _jsxs("form", { "hx-post": `/admin/jobs/${job.id}/notes/add`, "hx-target": "#notes-list-desktop", "hx-select": "#notes-list > *", "hx-swap": "innerHTML", "hx-on": "htmx:afterRequest: const xhr=event.detail.xhr; if(!xhr||xhr.status<200||xhr.status>=300) return; const input=this.querySelector('input[name=text]'); if(input) input.value=''; const btn=this.querySelector('button[type=submit]'); if(!btn) return; btn.dataset.defaultText=btn.dataset.defaultText||btn.textContent||'Add'; btn.textContent='Task Added'; btn.style.backgroundColor='var(--badge-secondary)'; btn.style.borderColor='var(--badge-secondary)'; btn.style.color='var(--on-brand)'; setTimeout(()=>{ btn.textContent=btn.dataset.defaultText||'Add'; btn.style.backgroundColor=''; btn.style.borderColor=''; btn.style.color=''; }, 1200);", class: "flex gap-2", children: [_jsx("input", { type: "text", name: "text", class: "uk-input flex-1", placeholder: "Add a task...", required: true }), _jsx("button", { type: "submit", class: "uk-btn uk-btn-default", children: "Add" })] })] }) }), _jsxs("details", { class: "uk-card uk-card-body sm:hidden", "hx-on": "htmx:afterSwap: if(event.detail && event.detail.target && event.detail.target.id === 'notes-list-mobile') this.open = true", children: [_jsx("summary", { class: "text-base font-semibold cursor-pointer", children: "Task Notes" }), _jsxs("section", { class: "pt-4", children: [_jsx("div", { class: "grid gap-2 mb-4", children: _jsx(NotesList, { jobId: job.id, notes: notes, listId: "notes-list-mobile" }) }), _jsxs("form", { "hx-post": `/admin/jobs/${job.id}/notes/add`, "hx-target": "#notes-list-mobile", "hx-select": "#notes-list > *", "hx-swap": "innerHTML", "hx-on": "htmx:afterRequest: const xhr=event.detail.xhr; if(!xhr||xhr.status<200||xhr.status>=300) return; const input=this.querySelector('input[name=text]'); if(input) input.value=''; const btn=this.querySelector('button[type=submit]'); if(!btn) return; btn.dataset.defaultText=btn.dataset.defaultText||btn.textContent||'Add'; btn.textContent='Task Added'; btn.style.backgroundColor='var(--badge-secondary)'; btn.style.borderColor='var(--badge-secondary)'; btn.style.color='var(--on-brand)'; setTimeout(()=>{ btn.textContent=btn.dataset.defaultText||'Add'; btn.style.backgroundColor=''; btn.style.borderColor=''; btn.style.color=''; }, 1200);", class: "grid gap-2 sm:flex", children: [_jsx("input", { type: "text", name: "text", class: "uk-input flex-1", placeholder: "Add a task...", required: true }), _jsx("button", { type: "submit", class: "uk-btn uk-btn-default", children: "Add" })] })] })] }), _jsxs("details", { class: "uk-card uk-card-body hidden sm:block danger-card", children: [_jsx("summary", { class: "text-base font-semibold cursor-pointer", children: "Danger zone" }), _jsx("section", { class: "pt-4", children: _jsx("button", { type: "button", class: "delete-btn", "hx-post": `/admin/jobs/${job.id}/delete`, "data-confirm": "arm", "hx-target": "#page-content", children: "Delete Job" }) })] }), _jsxs("details", { class: "uk-card uk-card-body sm:hidden", children: [_jsx("summary", { class: "text-base font-semibold cursor-pointer", children: "Delete Job" }), _jsx("section", { class: "pt-4", children: _jsx("button", { type: "button", class: "delete-btn", "hx-post": `/admin/jobs/${job.id}/delete`, "data-confirm": "arm", "hx-target": "#page-content", children: "Delete Job" }) })] })] }), _jsx("aside", { class: "hidden lg:block", children: _jsxs("div", { class: "grid gap-4 lg:sticky", style: "top: 92px;", children: [_jsxs("div", { class: "uk-card uk-card-body", children: [_jsx("h3", { class: "text-base font-semibold mb-3", children: "Customer" }), customer ? (_jsxs("div", { class: "grid gap-2 text-sm", children: [_jsxs("p", { class: "font-medium", children: [customer.first_name, " ", customer.last_name] }), _jsx("p", { class: "text-muted-foreground", children: customer.email || '-' }), _jsx("p", { class: "text-muted-foreground", children: customer.phone || '-' }), _jsx("div", { children: _jsx("a", { href: `/admin/customers/${customer.id}/edit`, class: "uk-link", "hx-get": `/admin/customers/${customer.id}/edit`, "hx-target": "#page-content", "hx-select": "#page-content", "hx-push-url": "true", children: "Open customer" }) })] })) : (_jsx("p", { class: "text-sm text-muted-foreground", children: "No customer linked." }))] }), _jsxs("div", { class: "uk-card uk-card-body", children: [_jsx("h3", { class: "text-base font-semibold mb-3", children: "Service" }), _jsxs("div", { class: "grid gap-2 text-sm", children: [_jsxs("div", { children: [_jsx("p", { class: "text-xs text-muted-foreground", style: "margin:0;", children: "Service" }), _jsx("p", { class: "font-medium", style: "margin:0;", children: service?.name || job.custom_service_name || 'Custom Service' })] }), _jsxs("div", { children: [_jsx("p", { class: "text-xs text-muted-foreground", style: "margin:0;", children: "Territory" }), _jsx("p", { class: "font-medium", style: "margin:0;", children: territory?.name || '-' })] })] })] })] }) })] }) }) })] }));
};
//# sourceMappingURL=job-detail.js.map